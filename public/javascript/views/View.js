// Generated by CoffeeScript 1.3.1
(function() {

  define(['use!handlebars', 'use!underscore', 'messages/dictionary'], function(Handlebars, _, dictionary) {
    return function(options) {
      var helper, key, settings, _ref;
      settings = _.defaults(options, {
        helpers: {
          link: function(text, url) {
            var result;
            text = Handlebars.Utils.escapeExpression(text);
            url = Handlebars.Utils.escapeExpression(url);
            result = '<a href="' + url + '">' + text + '</a>';
            return new Handlebars.SafeString(result);
          },
          message: function(key) {
            return dictionary.find(key);
          }
        }
      });
      _ref = settings.helpers;
      for (key in _ref) {
        helper = _ref[key];
        Handlebars.registerHelper(key, helper);
      }
      return Handlebars.compile(options.template);
    };
  });

}).call(this);
